{% extends 'manage/manage_base.html' %}
{% set page='event_hit_stats' -%}

{% block manage_title %}
  Hit Statistics
{% endblock %}


{% block site_css %}
  {{ super() }}
  <style>
  td.total_hits { font-weight: bold; }
  </style>
{% endblock %}


{% block manage_content %}

  {% if stats_total %}
  <p class="snippet">
  The total number of hits across all <strong>{{ thousands(events_total) }}</strong> events is: <strong>{{ thousands(stats_total) }}</strong>
  </p>
  {% endif %}

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Event</th>
	<th>&nbsp;</th>
        <th>Hits</th>
        <th>Age</th>
        <th>Hits/day <sup>*</sup></th>
      </tr>
    </thead>
    <tbody>
      {% for stat in paginate %}
      <tr>
        <td><a href="{{ url('main:event', stat.event.slug) }}" title="{{ stat.event.title }}">{{ truncate_words(stat.event.title, 10) }}</a></td>
	<td>
          <a href="{{ url('manage:event_edit', stat.event.pk) }}" class="btn btn-mini">
            <i class="icon-edit"></i> Edit
          </a>
	</td>
        <td class="total_hits">
          {{ thousands(stat.total_hits) }}
        </td>
        <td>
          {{ timesince(stat.event.archive_time) }}
        </td>
        <td>
          {{ (stat.hits_per_day or 0.0)|round(1) }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% include 'manage/_paginate.html' %}

  <p>
  *
  Approximate value since the event was archived.
  </p>


{% endblock %}
